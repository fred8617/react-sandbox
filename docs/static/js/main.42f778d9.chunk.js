(this.webpackJsonprsb=this.webpackJsonprsb||[]).push([[2],{313:function(e,t,n){},393:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var r=n(82),a=n(39),c=n(283),s=n.n(c),i=(n(313),n(304)),o=n(177),u=n(25),p=n(20),l=n(223),d=n(13),m=n.n(d),f=n(190),b=n(307),j=n(286),y=n(160),h=n(298),g=n.n(h),v=n(299),x=n.n(v),O=n(300),w=n.n(O),C=n(301),S=n.n(C),E=function(e){var t=e.beforeMount,n=e.onChange,c=Object(l.a)(e,["beforeMount","onChange"]),s=Object(a.useRef)(null);return Object(a.useEffect)((function(){null===t||void 0===t||t(y);var e=y.editor.create(s.current,Object(j.a)({automaticLayout:!0,minimap:{enabled:!1}},c));return e.onDidChangeModelContent((function(t){null===n||void 0===n||n(e.getValue(),t)})),function(){e.dispose()}}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{style:{height:"100%",width:"100%"},ref:s})})};E.TypeScript=Object(a.forwardRef)((function(e,t){var n=e.defaultValue,c=void 0===n?"":n,s=e.libs,i=void 0===s?{}:s,o=e.extraLibs,u=void 0===o?{}:o,d=(e.libCode,Object(l.a)(e,["defaultValue","libs","extraLibs","libCode"])),m=Object(a.useRef)(),f=Object(a.useRef)();m.current||(m.current=y.editor.createModel(c,"typescript",y.Uri.file("/index.tsx"))),Object(a.useImperativeHandle)(t,(function(){return{model:m.current,monaco:f.current}})),Object(a.useEffect)((function(){return function(){m.current.dispose()}}),[]);var b=function(){Object.entries(i).map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];y.languages.typescript.typescriptDefaults.addExtraLib(r,"file:///node_modules/@types/".concat(n,"/index.d.ts"))})),Object.entries(u).map((function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];y.languages.typescript.typescriptDefaults.addExtraLib(r,"file:///node_modules/@types/".concat(n))}))};return Object(a.useEffect)((function(){return b(),function(){}}),[i]),Object(r.jsx)(E,Object(j.a)({model:m.current,didMount:function(){},beforeMount:function(e){f.current=e;var t={baseUrl:"file:///node_modules/@types/",allowSyntheticDefaultImports:!0,jsx:e.languages.typescript.JsxEmit.React,experimentalDecorators:!0,noEmit:!0,allowJs:!0,types:["react"]};e.languages.typescript.typescriptDefaults.setCompilerOptions(t),e.languages.typescript.typescriptDefaults.setEagerModelSync(!0);var n={provideDocumentFormattingEdits:function(e){return[{range:e.getFullModelRange(),text:g.a.format(e.getValue(),{trailingComma:"all",jsxSingleQuote:!1,semi:!0,plugins:[x.a,S.a,w.a],arrowParens:"always",bracketSpacing:!0,htmlWhitespaceSensitivity:"css",insertPragma:!1,jsxBracketSameLine:!0,printWidth:80,proseWrap:"preserve",quoteProps:"as-needed",requirePragma:!1,singleQuote:!1,tabWidth:2,useTabs:!1,vueIndentScriptAndStyle:!1})}]}};e.languages.registerDocumentFormattingEditProvider("typescript",n),b()},scrollbar:{}},d))}));var D=E,k=n(288),R=n.n(k),L=n(302),T=n.n(L),F=(n(393),n(303)),M={filename:"main.tsx",presets:["typescript","es2015","react"],plugins:["proposal-do-expressions","proposal-optional-chaining",["proposal-pipeline-operator",{proposal:"minimal"}],["proposal-decorators",{legacy:!0}],["proposal-class-properties",{loose:!0}],"transform-modules-systemjs"]},P=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.text()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=e.scripts,n=void 0===t?[]:t,c=e.code,s=void 0===c?"":c,i=(Object(l.a)(e,["scripts","code"]),Object(a.useState)(s)),o=Object(p.a)(i,2),d=o[0],j=o[1],h=Object(a.useState)(!0),g=Object(p.a)(h,2),v=g[0],x=g[1],O=Object(a.useState)(n),w=Object(p.a)(O,2),C=w[0],S=w[1],E=Object(a.useState)(),L=Object(p.a)(E,2),B=L[0],U=L[1],I=Object(a.useRef)(""),J=Object(a.useRef)(),V=Object(a.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,a,c,s,i,o,u,p,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.languages.typescript.getTypeScriptWorker();case 3:return n=e.sent,e.next=6,n();case 6:return r=e.sent,e.next=9,r.getSemanticDiagnostics(y.Uri.file("/index.tsx").toString());case 9:a=e.sent.filter((function(e){return 1===e.category})),console.log(a),c=F.transform(t,M).code,s=W.current.window.document,i=new Blob([c],{type:"text/javascript"}),o=URL.createObjectURL(i),s.children[0]&&s.removeChild(s.children[0]),s.appendChild(s.createElement("html")),s.documentElement.innerHTML='\n        <head>\n          <style type="text/css">csscode</style>\n          <script type="systemjs-importmap">\n         '.concat(JSON.stringify({imports:J.current}),'\n        <\/script>\n        </head>\n        <body>\n          <div id="root">\n          </div>\n        </body>\n        '),(u=s.createElement("script")).type="systemjs-module",u.src=o,s.body.appendChild(u),console.log(c),(p=s.createElement("script")).type="text/javascript",p.innerHTML=I.current,s.body.appendChild(p),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(0),(l=W.current.window.document).children[0]&&l.removeChild(l.children[0]),l.appendChild(l.createElement("html")),l.documentElement.innerHTML='\n        <head>\n          <style type="text/css">\n            #root{\n              color:red;\n              font-weight:bold;\n            }\n          </style>\n        </head>\n        <body>\n          <pre id="root" >'.concat(e.t0,"</pre>\n        </body>\n        ");case 35:return e.prev=35,e.finish(35);case 37:j(t);case 38:case"end":return e.stop()}}),e,null,[[0,29,35,37]])})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),t=[{name:"systemjs",src:"https://unpkg.com/systemjs/dist/system.min.js"},{name:"systemjs-extra-amd",src:"https://unpkg.com/systemjs/dist/extras/amd.min.js"}],e.next=5,Promise.all(t.map(function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.src);case 2:return n=e.sent,t.code=n,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.next=7,Promise.all(C.map(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.src);case 2:if(n=e.sent,t.code=n,!t.types){e.next=9;break}return e.next=7,Promise.all(t.types.map(function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:r=e.sent,t.typeCode=r.join(";");case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:n=e.sent,J.current=Object.fromEntries(n.map((function(e){return[e.name,URL.createObjectURL(new Blob([e.code||""],{type:"text/javascript"}))]}))),S(Object(u.a)(n)),I.current=t.map((function(e){return e.code})).join(";");case 11:return e.prev=11,x(!1),e.finish(11);case 14:V(s);case 15:case"end":return e.stop()}}),e,null,[[0,,11,14]])})))()}),[]);var W=Object(a.useRef)(),H=Object(a.useRef)(null);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"sand-box",style:{background:"#fff",height:"100vh"},children:Object(r.jsxs)(b.a,{onDragStarted:function(){return U(!0)},onDragFinished:function(){return U(!1)},pane1Style:{position:"relative"},pane2Style:{position:"relative"},split:"vertical",defaultSize:"50%",children:[Object(r.jsx)("div",{style:{height:"100%"},children:Object(r.jsx)(D.TypeScript,{ref:H,defaultValue:d,libs:Object.fromEntries(C.map((function(e){return[e.name,e.typeCode]})).filter(Boolean)),onChange:T()(V,800)})},"code"),Object(r.jsx)("div",{style:{height:"100%"},children:Object(r.jsx)(r.Fragment,{children:!v&&Object(r.jsx)(R.a,{style:{height:"100%",width:"100%",pointerEvents:B?"none":"initial"},className:"frame",children:Object(r.jsx)(k.FrameContextConsumer,{children:function(e){var t=e.window;return W.current=t,Object(r.jsx)(r.Fragment,{})}})})})},"preview")]})})})};var U=function(){return Object(r.jsx)(i.a,{children:Object(r.jsx)(o.a,{path:"/",children:Object(r.jsx)(B,{code:'import React from "react";\nimport ReactDOM from "react-dom";\nReactDOM.render(<>hello world</>, document.getElementById("root"));',scripts:[{name:"react",src:"https://unpkg.com/react/umd/react.production.min.js",types:["https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/react/index.d.ts","https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/react/global.d.ts"]},{name:"react-dom",src:"https://unpkg.com/react-dom/umd/react-dom.production.min.js",types:["https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/react-dom/index.d.ts"]}]})})})},I=function(e){e&&e instanceof Function&&n.e(73).then(n.bind(null,472)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(r.jsx)(U,{}),document.getElementById("root")),I()}},[[398,3,4]]]);
//# sourceMappingURL=main.42f778d9.chunk.js.map